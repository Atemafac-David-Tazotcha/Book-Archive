<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Book Details</ion-title>
    
    <!-- Options Menu (3 lines) -->
    <ion-buttons slot="end">
      <ion-button id="options-menu-trigger">
        <ion-icon slot="icon-only" name="ellipsis-vertical"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="book-details-container" *ngIf="book">
    <!-- Book Cover -->
    <div class="book-cover">
      <img [src]="book.image" alt="{{book.title}} cover" class="cover-image">
    </div>

    <!-- Book Information -->
    <div class="book-info">
      <h1 class="book-title">{{book.title}}</h1>
      <p class="book-author">By {{book.author}}</p>
      
      <div class="details-grid">
        <div class="detail-item">
          <span class="label">Category:</span>
          <span class="value">{{getCategoryName(book.classLevel)}}</span>
        </div>
        
        <div class="detail-item" *ngIf="book.publicationDate">
          <span class="label">Published:</span>
          <span class="value">{{book.publicationDate | date:'mediumDate'}}</span>
        </div>
        
        <div class="detail-item" *ngIf="book.pricePerCarton">
          <span class="label">Price per Carton:</span>
          <span class="value">{{book.pricePerCarton | currency:'CFA '}}</span>
        </div>
        
        <div class="detail-item" *ngIf="book.quantity">
          <span class="label">Quantity Available:</span>
          <span class="value">{{book.quantity}} cartons</span>
        </div>
      </div>

      <!-- Book Summary -->
      <div class="book-summary" *ngIf="book.bookInfo">
        <h3>About This Book</h3>
        <p>{{book.bookInfo}}</p>
      </div>
    </div>
  </div>
</ion-content>

<!-- Options Menu Popover -->
<ion-popover trigger="options-menu-trigger" side="bottom" alignment="end">
  <ng-template>
    <ion-content>
      <ion-list>
        <ion-item button (click)="editBook()">
          <ion-icon name="create-outline" slot="start"></ion-icon>
          <ion-label>Edit Book</ion-label>
        </ion-item>
        
        <ion-item button (click)="addToFavorites()">
          <ion-icon name="heart-outline" slot="start"></ion-icon>
          <ion-label>Add to Favorites</ion-label>
        </ion-item>
        
        <ion-item button (click)="addToStore()">
          <ion-icon name="cart-outline" slot="start"></ion-icon>
          <ion-label>Add to Store</ion-label>
        </ion-item>
        
        <ion-item button (click)="deleteBook()" class="delete-option">
          <ion-icon name="trash-outline" slot="start"></ion-icon>
          <ion-label>Delete Book</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ng-template>
</ion-popover>